














<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,width=device-width">
    <link rel="apple-touch-icon" sizes="180x180" href="/resources/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/images/favicon/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/resources/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!-- SEO -->
    <title>마이페이지 | Air Premia</title>
    <meta name="description" content="Air Premia, Korea's first hybrid (HSC) airline with high-quality service and reasonable cost."/>
    <meta name="naver-site-verification" content="5f173272db303645301c957eebc8a66eebbac3b1"/>
    <meta name="facebook-domain-verification" content="9h0b04dag4d32l8ss11vp12aeaosuv"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.airpremia.com/mypage/myInfo"/>
    <meta property="og:title" content="마이페이지 | Air Premia"/>
    <meta property="og:description" content="Air Premia, Korea's first hybrid (HSC) airline with high-quality service and reasonable cost."/>
    <meta property="og:image" content="https://static.flypremia.com/images/logo/airpremia_og.png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>

    <link rel="canonical" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" href="https://www.airpremia.com/mypage/myInfo" hreflang="x-default"/>

    <link rel="alternate" hreflang="ko-KR" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="en-KR" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="ja-KR" href="https://www.airpremia.com/mypage/myInfo">

    <link rel="alternate" hreflang="ko-US" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="en-US" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="ja-US" href="https://www.airpremia.com/mypage/myInfo">

    <link rel="alternate" hreflang="ko-SG" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="en-SG" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="ja-SG" href="https://www.airpremia.com/mypage/myInfo">

    <link rel="alternate" hreflang="ko-VN" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="en-VN" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="ja-VN" href="https://www.airpremia.com/mypage/myInfo">

    <link rel="alternate" hreflang="ko-JP" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="en-JP" href="https://www.airpremia.com/mypage/myInfo">
    <link rel="alternate" hreflang="ja-JP" href="https://www.airpremia.com/mypage/myInfo">
    <!-- End SEO -->

    <!-- 정적페이지 캐쉬 안먹도록.. -->
    
    

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <![endif]-->

    <!-- CSS -->
    <link rel="stylesheet" href="https://static.flypremia.com/css/jquery-ui.css">
    <link rel="stylesheet" href="https://static.flypremia.com/css/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" href="https://static.flypremia.com/css/daterangepicker.css">
    <link rel="stylesheet" href="https://static.flypremia.com/css/toastify.css">
    <link rel="stylesheet" type="text/css" href="/resources/css/webfont.css?dt=20231128110948">
    <link rel="stylesheet" type="text/css" href="/resources/css/common.css?dt=20231128110948"/>
    <link rel="stylesheet" type="text/css" href="/resources/css/style.css?dt=20231128110948"/>
    <link rel="stylesheet" type="text/css" href="/resources/css/style2.css?dt=20231128110948"/>
    <link rel="stylesheet" type="text/css" href="/resources/css/footer.css?dt=20231128110948"/>
    <link rel="stylesheet" type="text/css" href="/resources/css/eticket.css?dt=20231128110948">
    <link rel="stylesheet" type="text/css" href="/resources/css/lang_en.css?dt=20231128110948">
    <link rel="stylesheet" type="text/css" href="/resources/css/lang_en_US.css?dt=20231128110948">
    <link rel="stylesheet" type="text/css" href="/resources/css/lang_jp.css?dt=20231128110948">
    <!-- End CSS -->

    <!-- Js -->
    <script type="text/javascript" src="https://static.flypremia.com/js/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/jquery-ui.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/jquery.bpopup.min.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/moment.min.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/axios.min.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/swiper.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/toastify.js"></script>
    <script type="text/javascript" src="https://static.flypremia.com/js/daterangepicker.js"></script>
    <script type="text/javascript" src="/resources/js/common-cb1d0b9e9cc736299c231c9e0fb62b8a.js"></script>
    <script type="text/javascript" src="/resources/js/util-34d79cd51695239cbcde9bf76ed58e43.js"></script>
    <script type="text/javascript" src="/resources/js/airpremiaUtil-d4ff50fbddef613f69edc000316a731a.js"></script>
    <script type="text/javascript" src="/resources/js/crypto-5af560b27c8b823f7764d1fa8e2604a8.js"></script>
    <!-- End Js -->

    <!-- Third Party -->
    
    
    
    <script>
        const serverProfile = 'prod,ap-prod,ods-prod';
        const frontendBaseUrl = 'https://www.airpremia.com';
        const userId = '253056';
    </script>
    <script type="text/javascript" src="/resources/js/cdp/init/initCdp-1dbb0c22427c8ef5cbcec7872d5c093c.js"></script>
    <script type="text/javascript" src="/resources/js/cdp/cdpModels-c52da4fffbf82496a077649cb001489e.js"></script>
    <script type="text/javascript" src="/resources/js/cdp/cdpUtil-0ffe3214f4e934de386993c666fd072a.js"></script>
    <script type="text/javascript" src="https://js.sentry-cdn.com/ccb701681fee45fa8996dbfee881eb8f.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/resources/js/cdp/init/initSentry-71f5c81f795974cf754e2dac6590cb81.js"></script>
    <!-- Third Party -->
</head>
<body id="getLang" class="en" style="overflow-x: hidden">
<script type="text/javascript" src="/resources/js/cdp/init/initChannelTalk-038d7e8b73f873c0fa27c564fded2050.js"></script>
<script>
    let cdpPage = new CdpPage();
    // 한국어 또는 영어 설정인 경우 노출, 일본어 설정인 경우 미노출
    if('en' === 'ja'){
        ChannelIO('hideChannelButton');
    }
</script>
<div class="loadingBar" style="display:none;">
    <div class="blind"></div>
    <div class="bar">
        <i class="fst"></i>
        <i class="scd"></i>
        <i class="trd"></i>
    </div>
</div>









<style>


</style>
<script async src="https://cse.google.com/cse.js?cx=52590a79f1c67c2b9"></script>
<script>
    var BRAND_BAR_HIDE = "brandBarHide";
    var customerNumber = '1080002634';
    var programNumber = '1000253654';

    $("document").ready(function () {
        emergencyNotice();
        //darkSiteNews();
        //* 모바일 언어선택창 *//
        // open + close
        $('.btnHeaderMb .mbLangList .iconLang').click(function () {
            var $this = $(this).closest('.mbLangList');
            // close
            if ($this.hasClass('on')) {
                $this.removeClass('on tag').children('.subMb').fadeOut(100);
                //open
            } else {
                $('.mbLangList.on').not($this).removeClass('on').children('.subMb').fadeOut(100);
                $this.addClass('on tag').children('.subMb').fadeIn(100);
            }
        });


        // 브랜드 바 노출 여부 설정 (숨김 만료일 전이면 숨김, 숨김 처리 되어있지 않거나 만료일이 지나면 노출)
        const brandBarHide = JSON.parse(localStorage.getItem(BRAND_BAR_HIDE));
        if (brandBarHide && brandBarHide.expiration && new Date().getTime() < brandBarHide.expiration) {
            $(".header.ftG.comPd").hide();
        } else {
            $(".header.ftG.comPd").css("display", "flex");
            localStorage.removeItem(BRAND_BAR_HIDE);
        }
    });

    var id;	// 해당 게시글의 ID

    function emergencyNotice() {
        var today = new Date();
        today = today.format("yyyy-MM-dd");

        var data = {
            notice_id: "U",
            today: today,
        }

        axios
        ({
            url: '/notice/selectEmergency',
            method: "GET",
            params: data
        }).then((res) => {

            var data = res.data

            if (data.result != "success") {
                return "";
            }
            var length = data.list.length;
            var item = data.list[0]; //0번쨰 인덱스의 한개만 가져오기에 for문 불필요
            if (length != 0) {
                id = (item.id != undefined) ? item.id : "";
                var notice_id = (item.notice_id != undefined) ? item.notice_id : "";
                var title = (item.title != undefined) ? item.title : "";
                var emergencytitle = (item.title != undefined) ? item.title : "";

                var sdate = (item.startdate != undefined) ? item.startdate : "";
                var edate = (item.enddate != undefined) ? item.enddate : "";

                var startdate = (new Date(sdate)).format("yyyy-MM-dd");
                var enddate = (new Date(edate)).format("yyyy-MM-dd");

                $("#detailId").val(id);
                $("#emergencytitle").html(title);
                $(".mainNotice").show();
                $("#emergencytitle").show();

                $('#emergencytitle').unbind("click");
                $('#emergencytitle').on('click', function () {
                    detailNoticePage(id);
                });
            } else {
                $(".mainNotice").hide();
                $("#emergencytitle").hide();
            }
        }).catch(ex => {
        })
    }

    function noticeDetailPage() {
        var url = "/us/en/customer/emergencyNotice/detail";

        $("#detailId").val(id);
        $("#detailForm").attr("action", url);
        $("#detailForm").attr("method", "GET");
        $("#detailForm").submit();
    }

    function detailNoticePage(id) {
        var url = "/us/en/customer/notice/detail";
        $("#detailId").val(id);
        $("#detailForm").attr("action", url);
        $("#detailForm").attr("method", "GET");
        $("#detailForm").submit();
    }

    function fn_locale(locale) {
        axios
        ({
            url: '/setLocale',
            method: "POST",
            params: {locale: locale}
        }).then((res) => {
            window.location.href = window.location.href;
        }).catch(ex => {
        });
    }

    function darkSiteNews() {
        var today = new Date();
        today = today.format("yyyy-MM-dd");

        var data = {today: today}

        axios
        ({
            url: '/darkSite/GetNews',
            method: "GET",
            params: data
        }).then((res) => {
            var data = res.data
            if (data.result == "success") {
                var detail = data.detail;
                var id = (detail.id != undefined) ? detail.id : "";
                var title = (detail.title != undefined) ? detail.title : "";
                var content = (detail.content != undefined) ? detail.content : "";
                var contactInfo = (detail.contactinfo != undefined) ? detail.contactinfo : "";
                var sdate = (detail.startdate != undefined) ? detail.startdate : "";
                var edate = (detail.enddate != undefined) ? detail.enddate : "";
                var startdate = (new Date(sdate)).format("yyyy-MM-dd");
                var enddate = (new Date(edate)).format("yyyy-MM-dd");
                if (data.detail != null) {
                    $("#DarkSiteTitle").html(title);
                    $("#DarkSiteContent").html(content);
                    $("#DarkSiteContactInfo").html(contactInfo);
                    $("#darksite").show();
                }
            } else {
                $("#darksite").hide();
            }

        }).catch(ex => {
        })
    }

    //로그아웃클릭
    function fn_logout() {
        cdpUtil.reset();
        fn_formSubmit('/Logout');
    }

    //알람팝업
    function alarmPopup(text, focus, url) {

        if (focus == undefined) focus = "";
        if (url == undefined) url = "";

        if (text == "In-flight meals may not be available if the ticket is purchased within 12 hours of the flight departure. please click the continue button below.") {
            $(".alarmButton").html("Continue");
        } else {
            $(".alarmButton").html("Confirm");
        }

        $("#alarmText").text("");
        $("#alarmFocus").text("");
        $("#alarmUrl").val("");
        $("#alarmText").html(text);
        $("#alarmFocus").val(focus);
        $("#alarmUrl").val(url);
        $("#alarmPopup").bPopup();
    }

    function alarmClose() {
        $("#alarmPopup").bPopup().close();

        if ($("#alarmFocus").val() != "") {
            // #alarmFocus 요소가 팝업이 닫히기 전 focus 되는 현상이 발생하여, 순서를 미루기 위해 setTimeout() 적용
            setTimeout( ()=>{
                $("#" + $("#alarmFocus").val()).focus();
            },100);
        } else if ($("#alarmText").html() == "In-flight meals may not be available if the ticket is purchased within 12 hours of the flight departure. please click the continue button below.") {
            agree12 = true;
        } else if ($("#alarmUrl").val() != "") {
            fn_formSubmit($("#alarmUrl").val());
        }
    }

    /* function fn_siteSearch(){
        if($("#SEARCH_VALUE").val().trim() == ""){
            alarmPopup("Enter a search word");
		return false;
	}
	
	var new_form = $('<form></form>');
	new_form.attr("name", "new_form");
	new_form.attr("method", "post");
	new_form.attr("action", "/siteSearch");
	new_form.append($('<input/>', {type: 'hidden', name: 'SEARCH_VALUE', value:$("#SEARCH_VALUE").val() }));
	new_form.appendTo('body');
	new_form.submit();
    } */

    function closeHeaderBrandBar() {
        // 현재 시간에 14일을 더한 만료 일자를 계산
        const expirationDate = new Date().getTime() + (7 * 14 * 60 * 60 * 1000);
        localStorage.setItem(BRAND_BAR_HIDE, JSON.stringify({"expiration": expirationDate}));
        $(".header.ftG.comPd").hide();
    }
</script>

<form id="detailForm" name="detailForm">
    <input type="hidden" id="detailId" name="detailId"/>
</form>

<div class="mainDarkSiteNotice" id="darksite" style="display:none;">
    <div class="txt DarkSiteTag">notice</div>
    <div class="txt DarkSiteTitle" id="DarkSiteTitle"></div>
    <div class="txt DarkSiteContent" id="DarkSiteContent"></div>
    <div class="txt DarkSiteContactInfo" id="DarkSiteContactInfo"></div>
    <span class="icon arrow white"></span>
</div>

<!-- <a class="mainNotice" onclick="noticeDetailPage('+id+')"> -->
<a class="mainNotice">
    <div class="txt" id="emergencytitle" style="display:none;"></div>
</a>

<div class="covidNtc">
    <div class="header ftG comPd" style="display:none">
        <div class="billboard">
            <a class="iconWrap">
                <span class="txt">Hello, we are the First and Only HSC (Hybrid Service Carrier) Airline in Korea :)</span>
                <!--                        <i class="icon circleLg">바로가기</i> -->
            </a>
        </div>
        <a class="billx" id="billclose" onclick="closeHeaderBrandBar();">
            <i class="icon close"></i>
        </a>
    </div>
</div>
<div class="headerGroup">
    <nav class="gnb pc comPd">
        <div class="logo">
            <a href="/">에어프레미아</a>
        </div>
        <ul class="main">
            <li>
                <span class="label">Bookings</span>
                <div class="subWrap">
                    <ul class="sub m3">
                        <li>
                            <a onclick="fn_formSubmit('/ticket/flight')">
                                <i><img src="/resources/images/nav/ico_nav_1-1.svg" alt="항공권 예매"/></i>
                                <span class="label">Book Flights</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/ticket/flightPoint')">
                                <i><img src="/resources/images/nav/ico_nav_1-2.svg" alt="포인트 예매"/></i>
                                <span class="label">Booking with Points</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/event/promotionList')">
                                <i><img src="/resources/images/nav/ico_nav_1-3.svg" alt="이벤트"/></i>
                                <span class="label">Promotions</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/ticket/fare')">
                                <i><img src="/resources/images/nav/ico_nav_1-4.svg" alt="운임안내"/></i>
                                <span class="label">Fare Types</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li>
                <span class="label">Find Trips/Check-in</span>
                <div class="subWrap">
                    <ul class="sub m3">
                        
                        
                            <li>
                                <a onclick="fn_formSubmit('/mypage/upcomingJourney')">
                                    <i><img src="/resources/images/nav/ico_nav_2-1.svg" alt="예약 조회"/></i>
                                    <span class="label">Find Trips</span>
                                </a>
                            </li>
                        
                        <li>
                            <a onclick="fn_formSubmit('/checkin/online')">
                                <i><img src="/resources/images/nav/ico_nav_2-2.svg" alt="온라인 체크인"/></i>
                                <span class="label">Online Check-in</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/checkin/depArrCheck')">
                                <i><img src="/resources/images/nav/ico_nav_2-3.svg" alt="출/도착 조회"/></i>
                                <span class="label">Flight Status</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/checkin/schedule')">
                                <i><img src="/resources/images/nav/ico_nav_2-5.svg" alt="운항 스케줄"/></i>
                                <span class="label">Flight Schedules</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/support/checkin/info')">
                                <i><img src="/resources/images/nav/ico_nav_2-4.svg" alt="탑승 수속"/></i>
                                <span class="label">Check-in Procedure</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li>
                <span class="label">Premia Members</span>
                <div class="subWrap">
                    <ul class="sub m3">
                        <li>
                            <a onclick="fn_formSubmit('/us/en/member/membership')">
                                <i><img src="/resources/images/nav/ico_nav_3-1.svg" alt="회원등급"/></i>
                                <span class="label">Member Status</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/member/point')">
                                <i><img src="/resources/images/nav/ico_nav_3-2.svg" alt="포인트 적립"/></i>
                                <span class="label">Point Accrual</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/member/usepoint')">
                                <i><img src="/resources/images/nav/ico_nav_3-3.svg" alt="포인트 사용"/></i>
                                <span class="label">Use of Points</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li>
                <span class="label">In-flight</span>
                <div class="subWrap">
                    <ul class="sub m3">
                        <li>
                            <a href='/a/en/inflight/classService'>
                                <i><img src="/resources/images/nav/ico_nav_6-1.svg" alt="클래스별 서비스"/></i>
                                <span class="label">Services by class</span>
                            </a>
                        </li>
                        <li>
                            <a href='/a/en/inflight/service'>
                                <i><img src="/resources/images/nav/ico_nav_6-2.svg" alt="기내 서비스"/></i>
                                <span class="label">In-flight services</span>
                            </a>
                        </li>
                        <li>
                            <a href="/a/en/inflight/entertainment">
                                <i><img src="/resources/images/nav/ico_nav_6-3.svg" alt="기내 엔터테인먼트"/></i>
                                <span class="label">In-flight entertainment</span>
                            </a>
                        </li>
                        <li>
                            <a href="/a/en/inflight/wifi">
                                <i><img src="/resources/images/nav/ico_nav_6-4.svg" alt="기내 와이파이"/></i>
                                <span class="label">In-flight WiFi</span>
                            </a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/inflight/aboutPlane')">
                                <i><img src="/resources/images/nav/ico_nav_6-5.svg" alt="항공기 소개"/></i>
                                <span class="label">About aircraft</span>
                            </a>
                        </li>
                        <li>
                            <a href="http://airpremia.granddfs.com/fcom009.do?goTo=main" target="_blank">
                                <i><img src="/resources/images/nav/ico_nav_6-6.svg" alt="기내 면세점"/></i>
                                <span class="label">In-flight duty-free</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li>
                <span class="label">Services</span>
                <div class="subWrap service">
                    <ul class="sub m3">
                        <li>
                            <div class="title">
                                <i><img src="/resources/images/nav/ico_nav_4-6.svg" alt="도움이 필요한 손님"/></i>
                                <span class="label">Special Assistance</span>
                            </div>
                            <ul class="list">
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/need/infant')">Traveling with children</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/need/teenager')">Unaccompanied Minors/Youth</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/need/pregnant')">Traveling while pregnant</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/need/help')">Disability Assistance</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/need/pet')">Traveling with pets</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <div class="title">
                                <i><img src="/resources/images/nav/ico_nav_4-2.svg" alt="수하물"/></i>
                                <span class="label">Baggages</span>
                            </div>
                            <ul class="list">
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/baggage/prohibition')">Restricted items</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/baggage/free-baggage')">Free baggage</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/baggage/over-balance')">Excess baggage</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/baggage/special-carry')">Special baggage</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/baggage/lost-carry')">Lost/damaged baggage</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <div class="title">
                                <i><img src="/resources/images/nav/ico_nav_4-1.svg" alt="부가서비스 구매"/></i>
                                <span class="label">Purchase of additional services</span>
                            </div>
                            <ul class="list">
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/additionalService/baggage')">Advance purchase of baggage allowance</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/additionalService/seat')">Advance purchase of seats</a>
                                </li>
                                <li style="display:none;">
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/additionalService/meal')">Advance purchase of in-flight meals</a>
                                </li>
                                <li style="display:none;">
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/additionalService/bundle')">Bundle purchase</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/additionalService/side-seat')">Purchase of adjacent seats at the airport</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/additionalService/packing')">Purchase of baggage supplies</a>
                                </li>
                                <li name="pickDrop" style="display:none;">
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/additionalService/pickDrop')">공항
                                        이동 서비스</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <div class="title">
                                <i><img src="/resources/images/nav/ico_nav_4-4.svg" alt="취항지 공항 정보"/></i>
                                <span class="label">Information on destination airports</span>
                            </div>
                            <ul class="list">
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/airport/incheon')">Incheon International Airport</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/airport/NEA')">Northeast Asia</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/airport/SEA')">Southeast Asia</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/airport/EU')">Europe</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/support/airport/USA')">Americas</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <div class="title">
                                <i><img src="/resources/images/nav/ico_nav_4-5.svg" alt="고객지원"/></i>
                                <span class="label">Customer support</span>
                            </div>
                            <ul class="list">
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/customer/notice/list')">Notice</a>
                                </li>
                                
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/customer/faq')">FAQs</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/customer/lost')">In-flight Lost & Found</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/customer/archive')">Archive for document forms</a>
                                </li>
                                <li>
                                    <a class="label"
                                       onclick="fn_formSubmit('/us/en/customer/immigrationRegulations')">Immigration Regulations</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
        <div class="btnHeader">
            <ul class="hdMain">
                
                
                    <li>
                        <p>
                            Hello <strong id="loginUserName">ALEXI VERESCHAGA</strong>
                        </p>
                        <ul class="sCnd">
                            <li class="divide"><a onclick="fn_formSubmit('/mypage/myInfo')">My page</a></li>
                            <li><a class="empha" onclick="fn_formSubmit('/mypage/upcomingJourney')">My Trips</a></li>
                            <li><a onclick="fn_formSubmit('/mypage/lastJourney')">My Trip History</a></li>
                            <li class="divide"><a onclick="fn_logout()">Logout</a></li>
                        </ul>
                    </li>
                
                <li>
                    <i class="iconLang"></i>
                    <ul class="sCnd lang right">
                        <li><a href="/us/ko">한국어</a></li>
                        <li><a href="/us/en">English</a></li><!-- 다국어 영어 버튼 잠시 비활성화 -->
                        <li><a href="/us/ja">日本語</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
    <nav class="gnb mb comPd">
        <div class="logo">
            <a href="/">에어프레미아</a>
        </div>
        <div class="rightMenu">
            <button class="btn open">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="menuWrap">
                <button class="btn close">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="btnHeaderMb">
                    <ul class="main">
                        <li class="mbLangList">
                            <div class="flex">
                                <i class="icon iconLang white"></i>
                            </div>
                            <ul class="subMb">
                                <li><a href="/us/ko">한국어</a></li>
                                <li><a href="/us/en">English</a></li><!-- 다국어 영어 버튼 잠시 비활성화 -->
                                <li><a href="/us/ja">日本語</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="user">
                    <div class="left">
                        <div class="icon"></div>
                    </div>
                    
                        <div class="right in">
                            <div class="name">VERESCHAGA ALEXI</div>
                            <div class="email">veresch80@yahoo.com</div>
                            <div class="bottom">
                                <a onclick="fn_formSubmit('/mypage/myInfo')" class="btn my">My page</a>
                                <a onclick="fn_logout()" class="btn">Logout</a>
                            </div>
                        </div>
                    
                    
                </div>
                <div class="menus">
                    <dl class="notice">
                        <dt>
                            <i class="icon notice"></i>
                            <span class="txt">Notice</span>
                        </dt>
                        <dd>
                            <a class="link" onclick="fn_formSubmit('/us/en/covid')">
                                <p>Hello, we are the First and Only HSC (Hybrid Service Carrier) Airline in Korea :)</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Bookings</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/ticket/flight')">
                                <p>Book Flights</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/ticket/flightPoint')">
                                <p>Booking with Points</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/event/promotionList')">
                                <p>Promotions</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/ticket/fare')">
                                <p>Fare Types</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Find Trips/Check-in</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/checkin/find-trip')">
                                <p>Find Trips</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/checkin/online')">
                                <p>Online Check-in</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/checkin/depArrCheck')">
                                <p>Flight Status</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/checkin/schedule')">
                                <p>Flight Schedules</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/checkin/info')">
                                <p>Check-in Procedure</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Premia Members</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/member/membership')">
                                <p>Member Status</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/member/point')">
                                <p>Point Accrual</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/member/usepoint')">
                                <p>Use of Points</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>In-flight</dt>
                        <dd>
                            <a href='/a/en/inflight/classService'>
                                <p>Services by class</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a href='/a/en/inflight/service'>
                                <p>In-flight services</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a href="/a/en/inflight/entertainment">
                                <p>In-flight entertainment</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a href="/a/en/inflight/wifi">
                                <p>In-flight WiFi</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/inflight/aboutPlane')">
                                <p>About aircraft</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a href="http://airpremia.granddfs.com/fcom009.do?goTo=main" target="_blank">
                                <p>In-flight duty-free</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Special Assistance</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/need/infant')">
                                <p>Traveling with children</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/need/teenager')">
                                <p>Unaccompanied Minors/Youth</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/need/pregnant')">
                                <p>Traveling while pregnant</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/need/help')">
                                <p>Disability Assistance</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/need/pet')">
                                <p>Traveling with pets</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Baggages</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/baggage/prohibition')">
                                <p>Restricted items</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/baggage/free-baggage')">
                                <p>Free baggage</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/baggage/over-balance')">
                                <p>Excess baggage</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/baggage/special-carry')">
                                <p>Special baggage</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/baggage/lost-carry')">
                                <p>Lost/damaged baggage</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Purchase of additional services</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/additionalService/baggage')">
                                <p>Advance purchase of baggage allowance</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/additionalService/seat')">
                                <p>Advance purchase of seats</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/additionalService/side-seat')">
                                <p>Purchase of adjacent seats at the airport</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/additionalService/packing')">
                                <p>Purchase of baggage supplies</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd name="pickDrop" style="display:none;">
                            <a onclick="fn_formSubmit('/us/en/support/additionalService/pickDrop')">
                                <p>공항 이동 서비스</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Information on destination airports</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/airport/incheon')">
                                <p>Incheon International Airport</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/airport/NEA')">
                                <p>Northeast Asia</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/airport/SEA')">
                                <p>Southeast Asia</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/airport/EU')">
                                <p>Europe</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/airport/USA')">
                                <p>Americas</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Check-in Procedure</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/support/checkin/info')">
                                <p>Check-in information</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                    <dl class="list">
                        <dt>Customer support</dt>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/customer/notice/list')">
                                <p>Notice</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/customer/faq')">
                                <p>FAQs</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/customer/lost')">
                                <p>In-flight Lost & Found</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/customer/archive')">
                                <p>Archive for document forms</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                        <dd>
                            <a onclick="fn_formSubmit('/us/en/customer/immigrationRegulations')">
                                <p>Immigration Regulations</p>
                                <i class="icon arrow black"></i>
                            </a>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </nav>
</div>









<link rel="stylesheet" type="text/css" href="/resources/css/loading.css?dt=">

<script type="text/javascript">
    cdpPage = new CdpPage("Mypage", "MyInfo");

// true SNS 유저, false 일반 유저
var isSnsUser = "";
var getPersonKey;
var currntTabNum;	// 0 - 다가오는 여정 1 - 지난 여정 2 - 나의 문의 내역 3 - 기내 유실물
var getCurrentTabStatus;
var getGrade = "T1";
var myCouponData = '';
var marketList = JSON.parse('[{"area":"2","station_name":"Incheon International Airport","country_name":"Korea, Republic of","city_code":"ICN","city_label_kor":"서울\/인천","city_label_eng":"Seoul\/Incheon","currency":"KRW","city_label_jpn":"ソウル\/仁川"},{"area":"3","station_name":"United States of America","country_name":"Daniel K. Inouye International Airport","city_code":"HNL","city_label_kor":"하와이\/호놀룰루","city_label_eng":"Hawaii\/Honolulu","currency":"USD","city_label_jpn":"ハワイ\/ホノルル"},{"area":"3","station_name":"Newark Liberty International Airport","country_name":"United States of America","city_code":"EWR","city_label_kor":"뉴욕\/뉴어크 리버티","city_label_eng":"New York\/Newark Liberty","currency":"USD","city_label_jpn":"ニューヨーク\/ニューアーク リバティ"},{"area":"1","station_name":"Suvarnabhumi International Airport","country_name":"Thailand","city_code":"BKK","city_label_kor":"방콕","city_label_eng":"Bangkok","currency":"THB","city_label_jpn":"バンコク"},{"area":"2","station_name":"Narita International Airport","country_name":"Japan","city_code":"NRT","city_label_kor":"도쿄\/나리타","city_label_eng":"Tokyo\/Narita","currency":"JPY","city_label_jpn":"東京\/成田"},{"area":"3","station_name":"Los Angeles International Airport","country_name":"United States of America","city_code":"LAX","city_label_kor":"로스앤젤레스","city_label_eng":"Los Angeles","currency":"USD","city_label_jpn":"ロサンゼルス"},{"area":"4","station_name":"Frankfurt am Main Airport","country_name":"Germany","city_code":"FRA","city_label_kor":"프랑크푸르트","city_label_eng":"Frankfurt","currency":"EUR","city_label_jpn":"フランクフルト"}]');


$(document).ready(function() {
    setLoadingIcon();
	// 취약점 보완 (서버단에서 비밀번호 검증) 회원정보 변경 원할 시 비밀번호 틀렸을 시 POPUP
	var inputPasswordIsNotMatch = '';
	if(inputPasswordIsNotMatch == 'true') {
		alarmPopup("Please confirm your password.");
	}
	
	// CustomerNumber 가 존재 하지 않을 시 Page 넘겨주기 (로그인 안 한 상태로 URL 직접 접근 시)
	var existCustomerNumber= '1080002634';
	if(existCustomerNumber == '' || existCustomerNumber == null || existCustomerNumber == undefined) {
		var formData = document.moveFindTripPage;
		formData.submit();
		return;				
	}
	
	var marketListAllData = '[{"area":"2","station_name":"Incheon International Airport","country_name":"Korea, Republic of","city_code":"ICN","city_label_kor":"서울\/인천","city_label_eng":"Seoul\/Incheon","currency":"KRW","city_label_jpn":"ソウル\/仁川"},{"area":"3","station_name":"United States of America","country_name":"Daniel K. Inouye International Airport","city_code":"HNL","city_label_kor":"하와이\/호놀룰루","city_label_eng":"Hawaii\/Honolulu","currency":"USD","city_label_jpn":"ハワイ\/ホノルル"},{"area":"3","station_name":"Newark Liberty International Airport","country_name":"United States of America","city_code":"EWR","city_label_kor":"뉴욕\/뉴어크 리버티","city_label_eng":"New York\/Newark Liberty","currency":"USD","city_label_jpn":"ニューヨーク\/ニューアーク リバティ"},{"area":"1","station_name":"Suvarnabhumi International Airport","country_name":"Thailand","city_code":"BKK","city_label_kor":"방콕","city_label_eng":"Bangkok","currency":"THB","city_label_jpn":"バンコク"},{"area":"2","station_name":"Narita International Airport","country_name":"Japan","city_code":"NRT","city_label_kor":"도쿄\/나리타","city_label_eng":"Tokyo\/Narita","currency":"JPY","city_label_jpn":"東京\/成田"},{"area":"3","station_name":"Los Angeles International Airport","country_name":"United States of America","city_code":"LAX","city_label_kor":"로스앤젤레스","city_label_eng":"Los Angeles","currency":"USD","city_label_jpn":"ロサンゼルス"},{"area":"4","station_name":"Frankfurt am Main Airport","country_name":"Germany","city_code":"FRA","city_label_kor":"프랑크푸르트","city_label_eng":"Frankfurt","currency":"EUR","city_label_jpn":"フランクフルト"},{"area":"1","station_name":"Tan Son Nhat International Airport","country_name":"Vietnam","city_code":"SGN","city_label_kor":"호찌민","city_label_eng":"Ho Chi Minh","currency":"USD","city_label_jpn":"ホーチミン"},{"area":"2","station_name":"Incheon International Airport","country_name":"Korea, Republic of","city_code":"FUK","city_label_kor":"서울\/인천","city_label_eng":"Seoul\/Incheon","currency":"KRW","city_label_jpn":"ソウル\/仁川"},{"area":"1","station_name":"Singapore Changi Airport","country_name":"Singapore, Republic of","city_code":"SIN","city_label_kor":"싱가포르","city_label_eng":"Singapore","currency":"SGD","city_label_jpn":"シンガポール"},{"area":"1","station_name":"Noi Bai International Airport","country_name":"Vietnam","city_code":"HAN","city_label_kor":"하노이","city_label_eng":"Hanoi","currency":"USD","city_label_jpn":"ハノイ"},{"area":"4","station_name":"Josep Tarradellas Barcelona-El Prat Airport","country_name":"Spain","city_code":"BCN","city_label_kor":"바르셀로나","city_label_eng":"Barcelona","currency":"EUR","city_label_jpn":"バルセロナ"},{"area":"5","station_name":"Hazrat Shahjalal International Airport","country_name":"Bangladesh, Peoples Republic of","city_code":"DAC","city_label_kor":"다카","city_label_eng":" Dhaka","currency":"USD","city_label_jpn":"ダッカ"}]';
	if(marketListAllData) {
		marketList = JSON.parse('[{"area":"2","station_name":"Incheon International Airport","country_name":"Korea, Republic of","city_code":"ICN","city_label_kor":"서울\/인천","city_label_eng":"Seoul\/Incheon","currency":"KRW","city_label_jpn":"ソウル\/仁川"},{"area":"3","station_name":"United States of America","country_name":"Daniel K. Inouye International Airport","city_code":"HNL","city_label_kor":"하와이\/호놀룰루","city_label_eng":"Hawaii\/Honolulu","currency":"USD","city_label_jpn":"ハワイ\/ホノルル"},{"area":"3","station_name":"Newark Liberty International Airport","country_name":"United States of America","city_code":"EWR","city_label_kor":"뉴욕\/뉴어크 리버티","city_label_eng":"New York\/Newark Liberty","currency":"USD","city_label_jpn":"ニューヨーク\/ニューアーク リバティ"},{"area":"1","station_name":"Suvarnabhumi International Airport","country_name":"Thailand","city_code":"BKK","city_label_kor":"방콕","city_label_eng":"Bangkok","currency":"THB","city_label_jpn":"バンコク"},{"area":"2","station_name":"Narita International Airport","country_name":"Japan","city_code":"NRT","city_label_kor":"도쿄\/나리타","city_label_eng":"Tokyo\/Narita","currency":"JPY","city_label_jpn":"東京\/成田"},{"area":"3","station_name":"Los Angeles International Airport","country_name":"United States of America","city_code":"LAX","city_label_kor":"로스앤젤레스","city_label_eng":"Los Angeles","currency":"USD","city_label_jpn":"ロサンゼルス"},{"area":"4","station_name":"Frankfurt am Main Airport","country_name":"Germany","city_code":"FRA","city_label_kor":"프랑크푸르트","city_label_eng":"Frankfurt","currency":"EUR","city_label_jpn":"フランクフルト"},{"area":"1","station_name":"Tan Son Nhat International Airport","country_name":"Vietnam","city_code":"SGN","city_label_kor":"호찌민","city_label_eng":"Ho Chi Minh","currency":"USD","city_label_jpn":"ホーチミン"},{"area":"2","station_name":"Incheon International Airport","country_name":"Korea, Republic of","city_code":"FUK","city_label_kor":"서울\/인천","city_label_eng":"Seoul\/Incheon","currency":"KRW","city_label_jpn":"ソウル\/仁川"},{"area":"1","station_name":"Singapore Changi Airport","country_name":"Singapore, Republic of","city_code":"SIN","city_label_kor":"싱가포르","city_label_eng":"Singapore","currency":"SGD","city_label_jpn":"シンガポール"},{"area":"1","station_name":"Noi Bai International Airport","country_name":"Vietnam","city_code":"HAN","city_label_kor":"하노이","city_label_eng":"Hanoi","currency":"USD","city_label_jpn":"ハノイ"},{"area":"4","station_name":"Josep Tarradellas Barcelona-El Prat Airport","country_name":"Spain","city_code":"BCN","city_label_kor":"바르셀로나","city_label_eng":"Barcelona","currency":"EUR","city_label_jpn":"バルセロナ"},{"area":"5","station_name":"Hazrat Shahjalal International Airport","country_name":"Bangladesh, Peoples Republic of","city_code":"DAC","city_label_kor":"다카","city_label_eng":" Dhaka","currency":"USD","city_label_jpn":"ダッカ"}]');
	}
	
	var couponList = '{"myCouponList":[]}';
	var parsedCouponList = JSON.parse('{"myCouponList":[]}');
	myCouponData = parsedCouponList.myCouponList;
	$('#showVoucherCnt').html(myCouponData.length);
	
	// 나의 등급 보여주기 	
	$("#showGrade").html(getGradeByProgramLevel(getGrade));
	
	getPersonKey = 'Mjc1MjA1';
	
	// Point 정보 (총 포인트) API 잘 못가져와서 DB 로 가져오는 것으로 수정 
	// calPoint(); 	- Swagger API 이용 정보 제대로 못가져 옴
	// fn_qualifyingPoints();	- Loyalty API 이용 Point 정보 제대로 못가져와서 수정
	var showTotalPoint = '' == '' ? 0 : Number('');
	// 총 포인트 사용내역 표시
	$('#showPointNum').html(showTotalPoint.toLocaleString());
	
	/* -----------------넘어오는 값 확인후 해당 탭 이동------------------ */
	currntTabNum = 0;
	var inflightLostTab = "";
	var qnaTab = "";
	if(!(inflightLostTab == "3" || qnaTab == "2"))
	{
		getUpcomingJourneyData(1);
	}
	
	if(inflightLostTab == 3)
	{
		getCurrentTabStatus = 'lostInflight';
		switch(getCurrentTabStatus) 
		{
		case 'lostInflight' :
			currntTabNum = 3;
			$("#lostInflightTable").show();
			$("#journeyData").hide();
			$("#qnaTable").hide();
			getlostInflightData(1);
			break;
		}
		$("#lostInflight").trigger("click");
	}
	else if(qnaTab == 2)
	{
		getCurrentTabStatus = 'qna';
		switch(getCurrentTabStatus) 
		{
		case 'qna' :
			currntTabNum = 2;
			$("#journeyData").hide();
			$("#lostInflightTable").hide();
			$("#qnaTable").show();
			getQnaData(1);
			break;
		}
		$("#qna").trigger("click");
	}
	/* --------------------------------------------------------------- */
	
	
	$('#selectUpcomingLast button').click(function() {
		var getCurrentTabStatus = $(this).attr('data-tab');	
		switch(getCurrentTabStatus) {
			case 'upcomingJourney' :
				currntTabNum = 0;
				$("#journeyData").show();
				$("#qnaTable").hide();
				$("#lostInflightTable").hide();
				getUpcomingJourneyData(1);
				break;
			case 'lastJourney' :
				currntTabNum = 1;
				$("#journeyData").show();
				$("#qnaTable").hide();
				$("#lostInflightTable").hide();
				getLastJourneyData(1);
				break;
			case 'qna' :
				currntTabNum = 2;
				$("#qnaTable").show();
				$("#journeyData").hide();
				$("#lostInflightTable").hide();
				getQnaData(1);
				break;
			case 'lostInflight' :
				currntTabNum = 3;
				$("#lostInflightTable").show();
				$("#journeyData").hide();
				$("#qnaTable").hide();
				getlostInflightData(1);
				break;
		}
	})
	
	// SNS 유저일 시 비밀번호 확인없이 바로 회원정보 변경으로 이동
	// 현재 SNS 유저 사용 안하여 주석 처리
	/* $('#btnUserChangeInfo').click(function() {
		if(isSnsUser) {
			//location.href = '/mypage/changeUser';
			fn_formSubmit('/mypage/changeUser');
			return false;
		}
	}) */
	
	//비번숨기기 보이기
	$('.pawTglBtn').unbind("click");
	$('#pawTglBtn').on('click',function(){
        if( $("#password").attr("type") == "password" ){
        	$("#password").attr("type", "text");
            $("#passwordOn").show();
            $("#passwordOff").hide();
        }
        else{
        	$("#password").attr("type", "password");
        	$("#passwordOn").hide();
            $("#passwordOff").show();
        }
    });
	
})

function getUpcomingJourneyData(pageNo) {
    $("#lostInflightTable").hide();
    $("#qnaTable").hide();
   
	if(pageNo == undefined) {
		pageNo = 1;
	}
	$("#pageIndex").val(pageNo);
	var data =  {
			pageIndex: $("#pageIndex").val(),	
			customerNumber : customerNumber		
	}
	axios({
		url: '/mypage/upcomingJourneyData',
		method: 'post',
		params: data,
	}).then((res)=> {
		var upcomingArrayData = res.data.list;
		var html = "";
		var pHtml = "";
		$("#pagingDiv > ").remove();
		var index = 1;
		
		if(upcomingArrayData.length != 0 ) {
			// 여행 데이터가 있을 시 
			for(var i = 0; i < upcomingArrayData.length; i++) {
				var eachUpcomingJourneyData =  upcomingArrayData[i];
				var beginDate = (eachUpcomingJourneyData.begin_date != undefined) ? new Date(eachUpcomingJourneyData.begin_date).convertDay2() : "";
				var endDate = (eachUpcomingJourneyData.end_date != undefined) ? new Date(eachUpcomingJourneyData.end_date).convertDay2() : "";
                
                var currentTripType = eachUpcomingJourneyData.trip_type == 'OneWay' ? 'One-way' : 'Roundtrip';
                var currentJourneyStatus = eachUpcomingJourneyData.status == '2' ? 'Confirmed' : 'Cancelled';
                
                var originAirport = fn_setAirportText(eachUpcomingJourneyData.origin);   // eachUpcomingJourneyData.origin == 'ICN' ? 'Seoul/Incheon' : 'Singapore';
                var destinationAirport = fn_setAirportText(eachUpcomingJourneyData.destination);     //eachUpcomingJourneyData.destination == 'SIN' ? 'Singapore' : 'Seoul/Incheon';
                
                var dateLabel = eachUpcomingJourneyData.trip_type == 'OneWay' ? beginDate : beginDate + " - " + endDate;
                var tripTypeClass = eachUpcomingJourneyData.trip_type == 'OneWay' ? "oWay" : "rudWay";
                
                html += "<tr class='selectUpcomingJourneyDataList' onclick=detailReservation('" + eachUpcomingJourneyData.record_locator + "')>";
			 	html += '<td>' + eachUpcomingJourneyData.record_locator + '</td>';
                html += '<td>' + currentTripType +'</td>';
                html += '<td class="infoTd">' + originAirport + ' <span class="itinArr '+tripTypeClass+'"></span> ' + destinationAirport + '</td>';
                html += '<td>' + dateLabel +'</td>';
                html += '<td>' + currentJourneyStatus +'</td>';
                html += '</tr>';
			}
		} else {
			// 여행 예약 데이터가 없을 시 
			html += '<tr>';
			html += '<td colspan="5" style="text-align:center">There is no booking information.</td>';
			html += '</tr>';
		}
		$("#qnaTable").hide();
		$("#journeyData > tbody").html(html);
		pHtml = paging(res.data);
		$("#pagingDiv").append(pHtml);
	}).catch(err => {
	})
}

function setLoadingIcon() {
    const loadingHtml = '<tr><td colspan="5" class="loadingContainer"><div class="loadingiconWrap"><div class="loadingIcon"><i class="fst"></i><i class="scd"></i><i class="trd"></i></div></div></td></tr>';
    $("#journeyData > tbody").html(loadingHtml);
}

function getLastJourneyData(pageNo) {
	if(pageNo == undefined) {
		pageNo = 1;
	}
	
	$("#pageIndex").val(pageNo);
	
	var data =  {
			pageIndex: $("#pageIndex").val(),	
			customerNumber : customerNumber		
	}
	
	axios({
		url: '/mypage/lastJourneyData',
		method: 'post',
		params: data,
	}).then((res)=> {
		$("#journeyData > tbody > ").remove();
		var lastArrayData = res.data.list;
		var html = "";
		var pHtml = "";
		$("#pagingDiv > ").remove();
		var index = 1;
		
		if(lastArrayData.length != 0 ) {
			// 여행 데이터가 있을 시 
			for(var i = 0; i < lastArrayData.length; i++) {
				var eachLastJourneyData =  lastArrayData[i];		
				var beginDate = (eachLastJourneyData.begin_date != undefined) ? new Date(eachLastJourneyData.begin_date).convertDay2() : "";
				var endDate = (eachLastJourneyData.end_date != undefined) ? new Date(eachLastJourneyData.end_date).convertDay2() : "";
                
                var tripType = eachLastJourneyData.trip_type == 'OneWay' ? 'One-way' : 'Roundtrip';
                var currentTripType = eachLastJourneyData.trip_type == 'OneWay' ? 'One-way' : 'Roundtrip';
                var bookingStatusCode = eachLastJourneyData.status;
                var bookingSegmentStatusText = eachLastJourneyData.journeySegmentStatus;
                var bookingStatusCheckParam = {
                    bookingStatus : bookingStatusCode,
                    bookingSegmentStatusText : bookingSegmentStatusText
                }
                var currentJourneyStatus = getJourneyStatus(bookingStatusCheckParam);
                var originAirport = fn_setAirportText(eachLastJourneyData.origin);
                var destinationAirport = fn_setAirportText(eachLastJourneyData.destination);
                
                var dateLabel = eachLastJourneyData.trip_type == 'OneWay' ? beginDate : beginDate + " - " + endDate;
                var tripTypeClass = eachLastJourneyData.trip_type == 'OneWay' ? "oWay" : "rudWay";
                
				html += "<tr class='selectLastJourneyDataList' onclick=detailReservation('" + eachLastJourneyData.record_locator + "')>";
				html += '<td>' + eachLastJourneyData.record_locator +'</td>';
                html += '<td>' + currentTripType +'</td>';
                html += '<td class="infoTd">' + originAirport + ' <span class="itinArr '+tripTypeClass+'"></span> ' + destinationAirport + '</td>';
                html += '<td>' + dateLabel +'</td>';
                html += '<td>' + currentJourneyStatus +'</td>';
                html += '</tr>';
			}
		} else {
			// 여행 예약 데이터가 없을 시 
			html += '<tr>';
			html += '<td colspan="5" style="text-align:center">There is no booking information.</td>';
			html += '</tr>';
		}
		$("#journeyData > tbody").html(html);
		pHtml = paging(res.data);
		$("#pagingDiv").append(pHtml);
	}).catch(err => {
	})
}

function getDepartureDay(dayNum) {
	var dateDay = "";
	switch(dayNum) {
	case 0 :
		dateDay = ' (Sun)';
		break;
	case 1 : 
		dateDay = ' (Mon)';

		break;
	case 2 : 
		dateDay = ' (Tue)';
		break;
	case 3 :
		dateDay = ' (Wed)';
		break;
	case 4 :
		dateDay = ' (Thu)';
		break;
	case 5 :
		dateDay = ' (Fri)';
		break;
	case 6 :
		dateDay = ' (Sat)';
		break;
	}
	return dateDay;	
}

function fn_linkPage(pageNo) {
	if(currntTabNum == 0  || currntTabNum == 1) {
	var tbodyClassAttr = $('#journeyData > tbody').find("tr:eq(0)").attr("class");
		// 다가오는 여정
	 	if(tbodyClassAttr == 'selectUpcomingJourneyDataList') {
			getUpcomingJourneyData(pageNo);	
		}
		// 지난 여정 
		if(tbodyClassAttr == 'selectLastJourneyDataList' ) {
			getLastJourneyData(pageNo);
		}
	}
	if(currntTabNum == 2) {
		// 나의 문의 내역
			getQnaData(pageNo);
	}
	else if(currntTabNum == 3) {
		// 분실물 신고 내역
		getlostInflightData(pageNo);
	}
}

// 나의 여정
function detailReservation(recordLocator) {
	var formData = document.tripDetailData;
	$('#recordLocatorID').val(recordLocator);
	formData.submit();
	// location.href="/checkin/trip-detail?recordLocator=" +recordLocator;
}
// 1:1 문의 수정 페이지
function fn_detailQna(id) {
	var formData = document.qnaDetailData;
	$('#recordLocatorID1').val(id);
	formData.submit();
}

// 1:1 문의 내용 확인 페이지
function fn_seeQnaResult(id) {
	var formData = document.qnaDetailDataSeeResult;
	$('#recordLocatorID1SeeResult').val(id);
	formData.submit();
}

// 기내 유실물 수정페이지
function fn_detailLostInflight(serialnum) {
	var formData = document.lostInflightDetailData;
	$('#recordLocatorID2').val(serialnum);
	formData.submit();
}

// 기내 유실물 내용 확인 페이지
function fn_seeLostInflight(serialnum) {
	var formData = document.lostInflightDataSeeResult;
	$('#recordLocatorID2SeeResult').val(serialnum);
	formData.submit();
}

function getGradeByProgramLevel(grade) {
	var getGrade = 'BLUE';
	switch(grade) {
		case 'T1':
			getGrade = 'BLUE'
			break;
		case 'T2':
			getGrade = 'GOLD'
			break;
		case 'T3': 
			getGrade = 'DIAMOND'
			break;
	}
	return getGrade;
} 

// 회원정보 변경 pop-up 창에서 완료 버튼 클릭 시  
function changeMyInfo() {
	// 비밀번호 확인 서버단에서 검증 - 바로 회원 정보 수정 페이지로 이동(취약점 보완)
	$('#customerInputPasswordID').val($('#password').val());
	var formData = document.moveChangeUserData;
	formData.submit();
}

function searchAnotherServiceBooking() {
	//location.href='/checkin/find-trip';
	fn_formSubmit('/checkin/find-trip');
}

function fn_lostInflightAlert() {
	alarmPopup("Cases for which a response has already been given can no longer be edited.");
}

//1:1 문의 리스트 조회
function getQnaData(pageNo){
	var customerNumber = "1080002634";
	
    if(pageNo == undefined){
        pageNo = 1;
    }
    $("#pageIndex").val(pageNo);
    //검색 조건
    var data = {
        pageIndex : $("#pageIndex").val(),
        customerNumber : customerNumber,
    }
    axios({
        url: '/mypage/selectQna',
        method: 'GET',
        params : data
    }).then((res) => {
        $("#qnaTable > tbody >").remove();
        var resultList = res.data.list;
       	var html = "";
		var phtml = "";
        $("#qnaTable > tbody >").remove();
		$("#pagingDiv > ").remove();
        var index = 1;
        if(resultList.length > 0){
            for(var i = 0; i < resultList.length; i++){
                var list= resultList[i];
                var listNo = (res.data.paginationInfo.currentPageNo - 1) * 15 /*  page 표출 갯수에 맞게 설정 */ + index;
                var id = (list.id != undefined) ? list.id : "";
                var category = (list.category != undefined) ? list.category : "";
                var field = (list.field != undefined) ? list.field : "";
                var title = (list.title != undefined) ? list.title : "";
                var date1 = (list.created_at != undefined) ? list.created_at : "";
                var state = (list.comment_state != undefined) ? list.comment_state : "";
                var createdate = new Date(date1);
                var created_at = moment(createdate).format("YYYY-MM-DD");
               
                switch(category) {
        		case '불만':
        			category = 'Dissatisfied'
        			break;
        		case '칭송':
        			category = 'Compliment'
        			break;
        		case '문의': 
        			category = 'Inquiries'
        			break;
        		case '제안': 
        			category = 'Suggestions'
        			break;
        		}
                
                switch(field) {
        		case '예약/구매/환불':
        			field = 'Bookings/Purchases/Refunds'
        			break;
        		case '홈페이지':
        			field = 'Related to the website'
        			break;
        		case '수하물': 
        			field = 'Related to baggage'
        			break;
        		case '공항서비스': 
        			field = 'Related to airport services'
        			break;
        		case '객실서비스': 
        			field = 'Related to in-cabin services'
        			break;
        		case '기내식': 
        			field = 'Related to in-flight meals'
        			break;
        		case '기타': 
        			field = 'Related to other matters'
        			break;
        		case '비정상운항(결항/지연)': 
        			field = 'Related to an abnormality in the flight schedule (cancelled or delayed flights)'
        			break;
        		}
                
                // 답변 전 상태와 후 상태의 수정 가능 여부 판별
                if(state == 1)
                {
                	state = '<span class="ftO">Waiting for a response</span>';
	            	html += "<tr class='qnaTable' onclick=fn_detailQna('" + id + "')>";
                }
                else
                {
                	state = '<span class="ftB">Response complete</span>';
                	html += "<tr class='qnaTable' onclick=fn_seeQnaResult('" + id + "')>";
                }
				html += '<td>' + category +'</td>';
                html += '<td>' + field +'</td>';
                html += '<td>' + title + '</td>';
                html += '<td>' + created_at +'</td>';
                html += '<td>' + state +'</td>';
                html += '</tr>';
                       		
        		index++;
            }
            $("#qnaTable > tbody").append(html);

        } else {
            html += '<tr>';
			html += '<td colspan="5" style="text-align:center">There is no inquiry information.</td>';
			html += '</tr>';
			$("#qnaTable > tbody").append(html);
        }
        phtml = paging(res.data);
        $("#pagingDiv").append(phtml);
        reBinding();  
    }).catch(ex=> {
    })
}
 
//기내 유실물 리스트 조회
function getlostInflightData(pageNo){
	
	var customerNumber = "1080002634";
	
    if(pageNo == undefined){
        pageNo = 1;
    }
    $("#pageIndex").val(pageNo);
    //검색 조건
    var data = {
        pageIndex : $("#pageIndex").val(),
        customerNumber : customerNumber,
    }
    axios({
        url: '/mypage/selectLostInflight',
        method: 'GET',
        params : data
    }).then((res) => {
        $("#lostInflightTable > tbody >").remove();
        var resultList = res.data.list;
       	var html = "";
		var phtml = "";
        $("#lostInflightTable > tbody >").remove();
		$("#pagingDiv > ").remove();
        var index = 1;
        
        if(resultList.length > 0){
            for(var i = 0; i < resultList.length; i++){
                var list= resultList[i];
                var listNo = (res.data.paginationInfo.currentPageNo - 1) * 15 /*  page 표출 갯수에 맞게 설정 */ + index;
                var serialnum = (list.serialnum != undefined) ? list.serialnum : "";
                var origin = (list.origin != undefined) ? list.origin : "";
                var destination = (list.destination != undefined) ? list.destination : "";
                var created_at = (list.created_at != undefined) ? list.created_at : "";
                var comment_state = (list.comment_state != undefined) ? list.comment_state : "";
                var itemname = (list.itemname != undefined) ? list.itemname : "";
                var flightno = (list.flightno != undefined) ? list.flightno : "";
                var travel = origin + ' → ' + destination;
                var created_at = moment(created_at).format("YYYY-MM-DD");  
                
             // 답변 전 상태와 후 상태의 수정 가능 여부 판별
                if(comment_state == 1)
                {
                	comment_state = '<span class="ftO">Waiting for a response</span>';
	            	html += "<tr class='lostInflightTable' onclick=fn_detailLostInflight('" + list.serialnum + "')>";
					html += '<td>' + flightno +'</td>';
	                html += '<td>' + travel +'</td>';
	                html += '<td>' + itemname + '</td>';
	                html += '<td>' + created_at +'</td>';
	                html += '<td>' + comment_state +'</td>';
	                html += '</tr>';
                }
                else if(comment_state == 2)
                {
                	comment_state = '<span class="ftB">Response complete</span>';
                	html += "<tr class='lostInflightTable' onclick=fn_seeLostInflight('" + serialnum + "')>";
					html += '<td>' + flightno +'</td>';
	                html += '<td>' + travel +'</td>';
	                html += '<td>' + itemname + '</td>';
	                html += '<td>' + created_at +'</td>';
	                html += '<td>' + comment_state +'</td>';
	                html += '</tr>';
                }
                else if(comment_state == 3)
                {
                	comment_state = '<span class="ftB">Response over phone complete</span>';
                	html += "<tr class='lostInflightTable' onclick=fn_seeLostInflight('" + serialnum + "')>";
					html += '<td>' + flightno +'</td>';
	                html += '<td>' + travel +'</td>';
	                html += '<td>' + itemname + '</td>';
	                html += '<td>' + created_at +'</td>';
	                html += '<td>' + comment_state +'</td>';
	                html += '</tr>';
                }
        		index++;
            }
            $("#lostInflightTable > tbody").append(html);

        } else {
            html += '<tr>';
			html += '<td colspan="5" style="text-align:center">There is no inquiry information.</td>';
			html += '</tr>';
			$("#lostInflightTable > tbody").append(html);
        }
        phtml = paging(res.data);
        $("#pagingDiv").append(phtml);
        reBinding();  
    }).catch(ex=> {
    })
}

function calPoint() {
	var param = JSON.stringify({});
    var body = JSON.stringify({});
    var data = new FormData();
    data.append("type",   'application/json');
    data.append("method", 'GET');
    data.append("param",   param);
	data.append("body",    body);
    data.append("uri",     '/api/nsk/v1/persons/' + getPersonKey);
    return axios({
        url: "/pssapi/query",
        method: 'post',
        data: data
    }).then((res) => {
        var result = res.data.RESULT;        
        if (result == 'error') {
            throw new Error(res.data.data);
        }
        var json = JSON.parse(res.data.data);
        
        // 총 포인트 내역 표시
        if(json.data.programs.length != 0) {
	        var pointBalance = json.data.programs[0].pointBalance;
	        // 총 포인트 사용내역 표시
	        $('#showPointNum').html(pointBalance);
        }
        
        if (json.errors) {
            throw new Error(json.errors[0].message);
        }
        return json.data;
    });
}

function fn_setAirportText(airport){
    const market = marketList.filter(market => market.city_code == airport)[0];
    const cityLabel = getLang === "ko" ? market.city_label_kor : getLang === "ja" ? market.city_label_jpn : market.city_label_eng;
    const cityCode = market.city_code;
    return cityLabel + "(" + cityCode + ")";
}

function enterkey() {
	if (window.event.keyCode == 13) {
    	// 엔터키가 눌렸을 때
		changeMyInfo();
    }
}

function fn_qualifyingPoints () {
	var data = {
		"MemberID": '1000253654',
		"ActiveSearchType": "Active"
	}
	axios({ 
		url: "/loyalty/MemberPointsSummaryGet", 
		method: 'post',
		params: data,
	}).then((res) => {
		var pointResult = res.data.RESULT;
		if(pointResult == 'success') {
			var pointData = res.data.data;
			var availablePoint = Number(pointData[0].QualifyingPointsLifetimeBalance);
			 // 총 포인트 사용내역 표시
	        $('#showPointNum').html(  availablePoint.toLocaleString()  );
		} else {
			fn_qualifyingPoints2();
		}
	})
}

function fn_qualifyingPoints2() {
	var data = {
		"MemberID": '1000253654',
		"ActiveSearchType": "Active"
	}
	axios({ 
		url: "/loyalty/MemberPointsSummaryGet", 
		method: 'post',
		params: data,
	}).then((res) => {
		var pointResult = res.data.RESULT;
		
		if(pointResult == "success") {
			var pointData = res.data.data;
			var availablePoint = Number(pointData[0].QualifyingPointsLifetimeBalance);
			 // 총 포인트 사용내역 표시
	        $('#showPointNum').html(availablePoint.toLocaleString());
		} else {
			fn_qualifyingPoints3();
		}
	})
}

function fn_qualifyingPoints3() {
	var data = {
		"MemberID": '1000253654',
		"ActiveSearchType": "Active"
	}
	axios({ 
		url: "/loyalty/MemberPointsSummaryGet", 
		method: 'post',
		params: data,
	}).then((res) => {
		var pointResult = res.data.RESULT;
		
		if(pointResult == "success") {
			var pointData = res.data.data;
			var availablePoint = Number(pointData[0].QualifyingPointsLifetimeBalance);
			 // 총 포인트 사용내역 표시
	        $('#showPointNum').html(availablePoint.toLocaleString());
		} else {
			return false;			
		}
	}).catch(ex=> {
      /*   Toastify({
			text: "An error has occurred in bringing up your member status information. Please try again.",
			duration: 3000
		}).showToast(); */
   		return false;
    })
}

// 여정 상태 Status
// 특정 예약 중 일부 예약은 탑승 까지 완료 하였지만 BookingStatus 가 Closed (3) 예약이 존재 하여
// Booking StatusCode 가 3 이면서 PassengerJounreySegment 테이블에
// BookingStatus 가 HK 인 데이터가 존재 할 시 Active 된 예약 으로 판별 만약 PassengerJounreySegment 테이블에 여정 데이터가 존재하지 않을 시 취소 된 여정 으로 판별
function getJourneyStatus(bookingStatusParam) {
    let bookingStatus = '';
    if(!bookingStatusParam || bookingStatusParam == '' || bookingStatusParam == null || bookingStatusParam == undefined) {
        return bookingStatus;
    }
    let bookingStatusCode = bookingStatusParam.bookingStatus; // Booking Stauts = 2-Confirmed, 3-Closed, 4-HoldCanceld
    let bookingSegmentStatusText = bookingStatusParam.bookingSegmentStatusText; //  Booking Status  HK=Confirmed,  HL=Listed
    if(bookingStatusCode == 2) {
        bookingStatus = 'Confirmed';    // 확약
    } else if(bookingStatusCode == 3 && bookingSegmentStatusText == 'HK') {
        // PassengerJourneySegment 테이블에 여정 데이터가 존재하면서 상태가 HK 일 시 StatusCode 가 3 이라도 살아있는 여정
        bookingStatus = 'Confirmed';    // 확약
    } else if(bookingStatusCode == 3 && (!bookingSegmentStatusText || bookingSegmentStatusText == '' || bookingSegmentStatusText == undefined)) {
        // PassengerJourneySegment 테이블에 여정 데이터가 존재 하지 않을 시 취소된 여정으로 판별
        bookingStatus = 'Cancelled';    // 취소 됨
    } else if(bookingStatusCode == 4) {
        bookingStatus = 'Cancelled';    // 취소 됨
    }
    return bookingStatus;
}

</script>


<form action="/checkin/trip-detail" name="tripDetailData"  method="post">
	<input type="hidden"  name="recordLocator" id="recordLocatorID" value="">
</form>
<!-- QNA 수정 페이지 넘기기 -->
<form action="/customer/update-qna" name="qnaDetailData"  method="post">
	<input type="hidden"  name="recordLocator1" id="recordLocatorID1" value="">
</form>
<!-- QNA 결과 페이지 넘기기 -->
<form action="/customer/qnaCheck" name="qnaDetailDataSeeResult"  method="post">
	<input type="hidden"  name="recordLocator1SeeResult" id="recordLocatorID1SeeResult" value="">
</form>
<!-- 기내 유실물 수정 넘기기 -->
<form action="/customer/updateLost" name="lostInflightDetailData"  method="post">
	<input type="hidden"  name="recordLocator2" id="recordLocatorID2" value="">
</form>
<!-- 기내 유실물 결과 넘기기 -->
<form action="/customer/lostCheck" name="lostInflightDataSeeResult"  method="post">
	<input type="hidden"  name="recordLocator2SeeResult" id="recordLocatorID2SeeResult" value="">
</form>

<!-- 세션없을시 (로그인 하지 않고 -URL 로 바로 접근 시) Page 넘겨버림 -->
<form action="/checkin/find-trip" name="moveFindTripPage"  method="post">
</form>

<!-- 바로 회원 정보 수정 페이지로 이동 (취약점 보완) -->
<form action="/mypage/changeUser" name="moveChangeUserData"  method="post">
	<input type="hidden" name="inputPassword" id="customerInputPasswordID" method="post">
</form>

<div class="layout">
	<div class="comTitle">
    	<h1 class="subTit">My page</h1>
    </div>
    <div class="prfCon">
    	<div class="prfGroup">
        	<div class="profile">
            	<img class="prfLeft" src="../../resources/images/illust/profile-img.png" alt="profile-image">
	            <div class="prfRight">
	            	<div class="prfName">ALEXI VERESCHAGA <span class="csNum">(Membership number: 1080002634)</span></div>
	                <div class="prfEmail">veresch80@yahoo.com</div>
	                	<div class="prfChgUserInfo">
	                   		<a class="iconWrap btnBpop" href="#">
	                        	<span class="txt gray fwB" id="btnUserChangeInfo">Update member information</span>
	                            <span class="icon arrow gray">바로가기</span>
	                        </a>
	                  	</div>
	            </div>
            </div>
            <div class="linkWrap">
                <a class="membership" onclick="fn_formSubmit('/mypage/mygrade')">
                    <!-- 비활성화 (사용할 때 css에서 display: none; -> display: block 바꾸기) > 사용하여 inline-block 으로 바꿈 -->
                    <div class="title">My member status</div>

                    <div class="description">
                        <div class="iconWrap">
                            <span class="txt" id="showGrade"></span>
                            <span class="icon arrow black">바로가기</span>
                        </div>
                    </div>

                </a>
                <a class="miles" onclick="fn_formSubmit('/mypage/mypointInfo')">
                    <!-- 비활성화 (사용할 때 css에서 display: none; -> display: block 바꾸기) > 사용하여 inline-block 으로 바꿈 -->
                    <div class="title">Points</div>
                    <div class="description">
                        <div class="iconWrap">
                            <span class="txt" id="showPointNum">0</span>
                            <span class="txt">P</span>
                            <span class="icon arrow black">바로가기</span>
                        </div>
                    </div>
                </a>
                <a class="coupon on" onclick="fn_formSubmit('/mypage/myCouponList')">
                    <div class="title">My vouchers</div>
                    <!-- class="on" 시 주황색 원 붙음(보유한 쿠폰이 있을 때) -->
                    <div class="description">
                        <div class="iconWrap">
                            <span class="txt" id="showVoucherCnt"></span>
                            <span class="icon arrow black">바로가기</span>
                        </div>
                    </div>
                </a>
            </div>
       	</div>
        <div class="tabMenu rud">
            <div class="tabBtn" id="selectUpcomingLast">
                <button class="btn on" data-tab="upcomingJourney">Upcoming trips</button>
                <button class="btn" data-tab="lastJourney">Past trips</button>
                <!-- 나의 문의 내역 사용하지 않아 숨김 처리 (2023.10.20)-->
                <!-- <button class="btn" data-tab="qna" id="qna">My inquiries</button>-->
                <button class="btn" data-tab="lostInflight" id="lostInflight">Details of my lost items</button>
            </div>
            <div class="tabCont">
                <div class="cont on">
                    <table class="lineTb" id="journeyData">
                        <colgroup>
                            <col width="15%">
                            <col width="15%">
                            <col width="30%">
                            <col width="25%">
                            <col width="15%">
                        </colgroup>
                        <thead>
                            <tr>
                                
                                <td>Booking number</td>
                                <td>Itinerary</td>
                                <td>Routes</td>
                                <td>Schedule</td>
                                <td>Status</td>
                            </tr>
                        </thead>
                        <tbody class="fwB">
                        </tbody>
                    </table>
                    
                    <table class="lineTb" id="qnaTable">
                        <colgroup>
                            <col width="15%">
                            <col width="15%">
                            <col width="30%">
                            <col width="25%">
                            <col width="15%">
                        </colgroup>
                        <thead>
                            <tr>
                                
                                <td>Type</td>
                                <td>Classification</td>
                                <td>Title</td>
                                <td>Date of inquiry</td>
                                <td>Status</td>
                            </tr>
                        </thead>
                        <tbody class="fwB">
                           <!-- 데이터 표출 장소 -->
                        </tbody>
                    </table>
                    
                    <table class="lineTb" id="lostInflightTable">
                        <colgroup>
                            <col width="15%">
                            <col width="15%">
                            <col width="30%">
                            <col width="25%">
                            <col width="15%">
                        </colgroup>
                        <thead>
                            <tr>
                                <td>Flight number</td>
                                <td>Flight route taken</td>
                                <td>Lost items</td>
                                <td>Date the report is received</td>
                                <td>Status</td>
                            </tr>
                        </thead>
                        <tbody class="fwB">
                           <!-- 데이터 표출 장소 -->
                        </tbody>
                    </table>
                <div class="paging">
				    <ul id="pagingDiv"></ul>
				    <input name="pageIndex" id="pageIndex" type="hidden" value="1" />
				</div>
              </div>
            </div>
        </div>
        <div class="linkBarWithImg fwB">
            <p>Do you have flight tickets that you booked through other services?</p>
            <a class="link bd" onclick="fn_formSubmit('/checkin/find-trip')">View bookings from other services</a>
        </div>
         <div class="cautionWrap">
             <div class="title">Note</div>
             <ul class="list">
                 <li>If you have booked a flight ticket through other services, the details of the booking shown may not be accurate.</li>                 <li>Changes to the booking of a flight can be made until one hour before departure.</li>                 <li>When changing the booking of a purchased flight ticket or requesting a refund, a change fee or refund fee may be charged in accordance with the fare rules.</li>
             </ul>
         </div>
     </div>
</div>

<!-- 나의정보 - 회원정보 변경 클릭 시 pop up -->
<div id="popUserChangeInfo" class="bPopWrap pop1">
           <div class="popTit">
               <p class="pTit">
                   Update member information
                   <span class="popDescription">Enter your password one more time for verification.</span>
               </p>
               <div class="xBtnWrap">
                   <button class="b-close">Close</button>
               </div>
           </div>
           <div class="popScr">
               Password
               <div class="txtIpCont gray">
                   <div class="inputWrapper">
                       <input type="password" maxlength="16" id="password" onkeyup="enterkey()" placeholder="Enter your password" value="" autofocus>
                        <!--<span class="pwToggle pwInvisible"></span> -->
							<div class="iconBox">
								<i class="pawTglBtn" id="pawTglBtn"> <img
									src="/resources/images/auth/pw_visible.png"
									class="eyesOn" id="passwordOn"> <img
									src="/resources/images/auth/pw_invisible.png"
									class="eyesOff" id="passwordOff">
								</i>
							</div>
                   </div>
               </div>
           </div>
           <div class="popBtm noBorder">
           	   <button class="taskButton" onclick="changeMyInfo()" >Completed</button>
               <!-- <button class="taskButton disable" >완료</button> -->
               <!-- 비밀번호 입력하면 활성화 (disable 제거) -->
        <a onclick="fn_formSubmit('/user/findPassword')" class="link bd fwB">Have you forgotten your password?</a>
    </div>
</div>












<script type="text/javascript">
    $(document).ready(function () {
        var currentLocale = getCookie("currentLocale");
        if (currentLocale == "ko") $("[name=pickDrop]").show();
        if (currentLocale == "en") $("#webAccessibility").show();
    });

    function getCookie(cookieName) {
        cookieName = cookieName + '=';
        var cookieData = document.cookie;
        var start = cookieData.indexOf(cookieName);
        var cookieValue = '';
        if (start != -1) {
            start += cookieName.length;
            var end = cookieData.indexOf(';', start);
            if (end == -1) end = cookieData.length;
            cookieValue = cookieData.substring(start, end);
        }
        return unescape(cookieValue);
    }

    // 파일 다운로드
    function pdfFileDownload(filepath, filename) {
        var file_Nm = filename;
        var file_Path = filepath;

        var url = '/customer/archive/download';
        var params = {"file_Nm": filename, "file_Path": filepath};
        $.download(url, $.param(params));
    }
</script>

<footer>
    <div class="footer">
        <div class="footer-main">
            <div class="footer-main-left">
                <!-- 회사소개 -->
                <div class="box">
                    <ul>
                        <li>
                            <h3>About the company</h3> <!-- 회사소개 -->
                        </li>
                        <li>
                            <a href="https://company.airpremia.com/PremiaGuide" target="_blank">About Air Premia</a> <!-- 에어프레미아 소개-->
                        </li>
                        <li>
                            <a href="https://airpremia.applyin.co.kr" target="_blank">Recruitment</a> <!-- 채용안내 -->
                        </li>
                        <li>
                            <a href="https://company.airpremia.com/notice?category=Pvd435myTa"
                               target="_blank">Investor relations</a> <!-- 투자정보 -->
                        </li>
                        <li>
                            <a href="mailto:contact@airpremia.com" target="_blank">Inquiries for alliances</a> <!-- 제휴문의 -->
                        </li>
                    </ul>
                </div>
                <!-- 약관 및 규정 -->
                <div class="box">
                    <ul>
                        <li>

                            <h3>Terms and conditions</h3>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/personal-Info')"
                               class="fwB">Personal data processing policies</a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/homepageTerms')">Terms and conditions for the use of the website</a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/transitTerms')">Terms and conditions for the international transport of passengers</a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/internationalTerms')">Terms and conditions for the international transport of cargo</a>
                        </li>
                        <li>
                            <a onclick="pdfFileDownload('/usr/src/files/sampleFile/','[AS Team] DOT Tarmac Delay Contingency Plan_20220927.pdf')">Tarmac
                                Delay</a>
                        </li>
                        <li>
                            <a onclick="pdfFileDownload('/usr/src/files/sampleFile/','YP-General Rules.pdf')">Tariffs</a>
                        </li>
                    </ul>
                </div>
                <!-- 기타안내 -->
                <div class="box">
                    <ul>
                        <li>
                            <h3>Other information</h3><!-- 기타안내 -->
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/airtrafic-user')">Plans for services catering to air transport passengers</a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/damage-relief')">Plans for relief and compensation for air transport passengers</a>
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/covid')">COVID-19 Information Center</a>
                        </li>
                        <!-- 웹접근성 추가 -->
                        <li id="webAccessibility" style="display:none;'">
                            <a onclick="fn_formSubmit('/us/en/webAccessibility')">Web
                                accessibility</a>
                        </li>
                        <!-- 사이트맵 추가 -->
                        <li>
                            <a onclick="fn_formSubmit('/us/en/sitemap')">Site map</a>
                        </li>
                    </ul>
                </div>
                <!-- SNS 바로가기 -->
                <div class="tablet-hidden">
                    <ul>
                        <li>
                            <h3>Social Media</h3> <!-- SNS 바로가기-->
                        </li>
                        <div class="snsWrapper">
                            <div class="snsBtn">
                                <a class="insta" target="_blank" href="https://www.instagram.com/airpremia_official">
                                    <img src="/resources/images/brand/ico_sns_instagram.svg" alt="인스타그램"/>
                                </a>
                            </div>
                            <div class="snsBtn">
                                <a class="facebook" target="_blank"
                                   href="https://www.facebook.com/profile.php?id=100087404105601">
                                    <img src="/resources/images/brand/ico_sns_facebook.svg" alt="페이스북"/>
                                </a>
                            </div>
                            <div class="snsBtn">
                                <a class="youtube" target="_blank" href="https://www.youtube.com/AIRPREMIA">
                                    <img src="/resources/images/brand/ico_sns_youtube.svg" alt="유튜브"/>
                                </a>
                            </div>
                            <div class="snsBtn blog">
                                <a class="blog" target="_blank" href="https://blog.naver.com/airpremia">
                                    <img src="/resources/images/brand/ico_sns_blog.svg" alt="블로그"/>

                                </a>
                            </div>
                            <div class="snsBtn">
                                <a class="news" target="_blank" href="https://company.airpremia.com/newsletter">
                                    <img src="/resources/images/brand/ico_sns_news.svg" alt="뉴스레터"/>
                                </a>
                            </div>
                        </div>
                        <a target="_blank" href="https://page.stibee.com/subscriptions/23059">
                            <div class="buttonWrapper">
                                <img src="/resources/images/util/ico-plus-on.svg"/>
                                <span>Subscribe NewsLetter</span><!--뉴스레터구독하기-->
                            </div>
                        </a>
                    </ul>
                </div>
                <!-- 고객 지원 -->
                <div class="tablet-hidden">
                    <ul>
                        <li>
                            <h3>Customer support</h3><!-- 기타안내 -->
                        </li>
                        </li>
                        <li>
                            <a href="mailto:support@airpremia.com"> Email support (support@airpremia.com)</a>
                            <!-- 이메일 문의 (support@airpremia.com)-->
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/customer/faq')">FAQs</a><!-- 자주묻는 질문-->
                        </li>
                    </ul>
                </div>
            </div>
            <div class="footer-main-right">
                <!-- SNS 바로가기 -->
                <div class="box ul-hidden">
                    <ul>
                        <li>
                            <h3>Social Media</h3> <!-- SNS 바로가기-->
                        </li>
                        <div class="snsWrapper">
                            <div class="snsBtn">
                                <a class="insta" target="_blank" href="https://www.instagram.com/airpremia_official">
                                    <img src="/resources/images/brand/ico_sns_instagram.svg" alt="인스타그램"/>
                                </a>
                            </div>
                            <div class="snsBtn">
                                <a class="facebook" target="_blank"
                                   href="https://www.facebook.com/profile.php?id=100087404105601">
                                    <img src="/resources/images/brand/ico_sns_facebook.svg" alt="페이스북"/>
                                </a>
                            </div>
                            <div class="snsBtn">
                                <a class="youtube" target="_blank" href="https://www.youtube.com/AIRPREMIA">
                                    <img src="/resources/images/brand/ico_sns_youtube.svg" alt="유튜브"/>
                                </a>
                            </div>
                            <div class="snsBtn blog">
                                <a class="blog" target="_blank" href="https://blog.naver.com/airpremia">
                                    <img src="/resources/images/brand/ico_sns_blog.svg" alt="블로그"/>

                                </a>
                            </div>
                            <div class="snsBtn">
                                <a class="news" target="_blank" href="https://company.airpremia.com/newsletter">
                                    <img src="/resources/images/brand/ico_sns_news.svg" alt="뉴스레터"/>
                                </a>
                            </div>
                        </div>
                        <a target="_blank" href="https://page.stibee.com/subscriptions/23059">
                            <div class="buttonWrapper">
                                <img src="/resources/images/util/ico-plus-on.svg"/>
                                <span>Subscribe NewsLetter</span><!--뉴스레터구독하기-->
                            </div>
                        </a>
                    </ul>
                </div>
                <!-- 고객 지원 -->
                <div class="box ul-hidden">
                    <ul>
                        <li>
                            <h3>Customer support</h3><!-- 기타안내 -->
                        </li>
                        <li>
                            <a href="mailto:support@airpremia.com"> Email support (support@airpremia.com)</a>
                            <!-- 이메일 문의 (support@airpremia.com)-->
                        </li>
                        <li>
                            <a onclick="fn_formSubmit('/us/en/customer/faq')">FAQs</a><!-- 자주묻는 질문-->
                        </li>
                    </ul>
                </div>
                <!-- 예약센터 -->
                <div class="box call-center">
                    <h3 class="flex items-center">
                        <span>Reservations</span> <!-- 예약 센터 -->
                        <button id="moreCall" class="moreCall"><i class="icon plus on">more</i></button>
                    </h3>
                    <div class="strong phone">1800-2626</div>
                    <div class="timeWrapper ftG">
                        <p class="label">Operation hours</p>
                    </div>
                    <div class="timeWrapper ftG">
                        <p class="label">Weekdays</p>
                        <p class="time">AM 07:00 - PM 06:00</p>
                    </div>
                    <div class="timeWrapper ftG">
                        <p class="label">Weekends</p>
                        <p class="time">AM 09:00 - PM 06:00</p>
                    </div>
                    <div class="timeWrapper ftG">
                        <p class="label laxPhoneNumber">*Operation hours are based on KST.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="left-contents">
                <div class="image-wrapper">
                    <a href="/"><img src="https://static.flypremia.com/images/logo/airpremia_brand_logo_transparent.png"
                                     alt="AirPremiaLogo"/></a>
                </div>
                <div class="footer-info ftG">
                    <ul>
                        <li>
                            <span>Air Premia Co., Ltd.</span>
                            <span>CEO: Myeongseop Yu, Bokook Moon</span>
                            <span>Business registration number: 864-81-00738</span>
                            <span>Telecom sales business report number: Gangseo No. 20-2591</span>
                        </li>
                        <li>
                            <span>4th floor, 248, Gonghangdaero, Gangseo-Gu, Seoul, Korea</span>
                            <span style="display:none;"></span>
                            <span>Personal data protection manager: Changhyun Keum</span>
                        </li>
                    </ul>
                </div>

            </div>
            <div class="copy-right">
                <p>&copy; AIR PREMIA, Inc. All rights reserved.</p>
            </div>

        </div>
    </div>
</footer>


<div class="bPopWrap w500 popMoreCall" id="popMoreCall">
    <div class="popTit">
        <p class="pTit">Air Premia Reservations</p>
        <div class="xBtnWrap">
            <button class="b-close">Close</button>
        </div>
    </div>
    <div class="popScr">
        <div class="lineTb rlt">
            <table>
                <tbody>
                <tr>
                    <th>Republic of Korea</th>
                    <td>+82) 1800 - 2626</td>
                </tr>
                <tr class="laxPhoneNumber">
                    <th>United States</th>
                    <th>Office hours: 6am-5pm Weekdays (PST, English)</th>
                    <td>+1) 213 - 626 - 2083</td>
                    <th>Office hours: Weekdays 7am-6pm,<br/>Weekends 9am-6pm(KST, Korean / English)</th>
                    <td>+1) 213 - 221 - 3786</td>
                    <td>+1) 917 - 503 - 9903</td>
                </tr>
                <tr>
                    <th>Germany</th>
                    <td>+49) 69 - 9023 - 5075</td>
                </tr>
                <tr>
                    <th>Japan</th>
                    <td>+81) 50 – 6864 - 8094</td>
                </tr>
                <tr>
                    <th>Thailand</th>
                    <td>+66) 2156 - 0918</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="popBtm flex">
        <button class="taskButton b-close">Confirm</button>
    </div>
</div>

<div id="alarmPopup" class="bPopWrap toast">
    <div class="popTit">
        <p id="alarmText" class="pTit"></p>
        <input type="hidden" id="alarmUrl" value="">
        <input type="hidden" id="alarmFocus" value="">
    </div>
    <div class="popBtm">
        <button onclick="alarmClose();" class="ftB alarmButton" id="alarmConfirmButton">Confirm</button>
    </div>
</div>
<script>
    const isBrowserOpened = 'true';
    cdpUtil.ready(() => {

        // UTM(캠페인) 정보 session에 저장
        cdpUtil.setCampainToSession();

        if (!isBrowserOpened || (userId && !cdpUtil.getUserId())) {
            cdpUtil.identify(
                userId,
                '{"agree_personal_collection_option":"N","gender":"M","noti_of_sms":"N","customer_number":"1080002634","birth_date":"1980-01-04T00:00:00","pw_updated_at":"2023-09-25T08:41:10","locale":"ko","person_key":"Mjc1MjA1","agree_hompage_use":"Y","password":"DD6BD0303197C08FC19C0219AE81C82105C92E4FD9067827E6CE24D460A1F454","program_number":"1000253654","country_number":1,"agree_eu":"N","id":253056,"agree_personal_transfer_to_abroad":"N","name_changed":"N","first_name":"ALEXI","email":"veresch80@yahoo.com","protector_agree":"N","person_phone_number_key":"Mjc1MjA1ITI3MzkxMw--","join_type":"F","person_email_address_key":"Mjc1MjA1IVA-","agree_personal_collection":"Y","noti_of_email":"N","last_name":"VERESCHAGA","photo":"","passport_first_name":"ALEXI","joined_at":"2023-09-25T08:41:10","country_code":"US","login_failCount":0,"phone":"1|6467023890","lastlogin_at":"2023-11-24T15:31:26","grade":"BLUE","birth_changed":"N","sns":"","phone_number":"6467023890","passport_last_name":"VERESCHAGA","agree_airline_membership":"N","passport_agree":"N","status":"A"}',
                'us',
                'en',
            );
        }
        cdpUtil.page(cdpPage.category, cdpPage.name);
    });
</script>
</body>

<script type="text/javascript">
    var userIp = '52.5.148.197';
    var getLang = $('#getLang').attr('class');
    $(document).ready(function () {
        //여정 조회 페이지부터 footer숨김
        var currentUrl = window.location.pathname;
        if (currentUrl == "/ticket/flight/cabin_class") $("footer").hide();
    });

    let browserTabId = sessionStorage.getItem("TAB_ID");
    if (!browserTabId) {
        let newKey = generateRandomString(20) + '_' + new Date().getTime();
        sessionStorage.setItem("TAB_ID", newKey);
        browserTabId = newKey;
    }

    //요청 인터셉터 추가
    axios.interceptors.request.use(
        function (config) {
            // 요청을 보내기 전에 수행할 일
            if (config.url.includes("/pssapi")) {
                config.headers["X-CONTEXT-ID"] = browserTabId;

                if (config.url === "/pssapi/query") {
                    if (config.data.get("body") != null) {
                        config.data.set("body", aes256Encode(config.data.get("body")))
                    }
                    if (config.data.get("param") != null) {
                        config.data.set("param", aes256Encode(config.data.get("param")))
                    }
                }
            }
            // 전역 loading 애니메이션 미적용 대상 페이지
            const notIncludesPage = ["/mypage/upcomingJourney", "/mypage/lastJourney"];
            if (!notIncludesPage.includes(location.pathname) && config.url !== "/ticket/selectPointTarget") { //승객번호 조회시 로딩바 X
                $(".loadingBar").show();
            }
            return config;
        },
        function (error) {
            return Promise.reject(error);
        });

    // 응답 인터셉터 추가
    axios.interceptors.response.use(
        function (response) {
            // 응답 데이터를 가공
            if (response.config.url === "/pssapi/query") {
                if ($("#loginUserName").html() !== undefined && !response.data.loggedIn) {
                    alarmPopup("The session has expired.", "", "/");
                    return false;
                }

                let resData = response.data.data;

                if (resData === "queryError") {
                    alarmPopup("This is an unusual approach.", "", "/");
                }

                if (resData.includes("nsk:Booking:JourneysOverlap")) {
                    alarmPopup("This flight cannot be booked.<br> We apologize for the inconvenience.", "", "/");
                }

                if (resData.includes("nsk:Booking:NoBookingInState")) {
                    alarmPopup("The session has expired.", "", "/");
                }

                if (resData.includes("nsk:Booking:ClassNotAvailable")) {
                    alarmPopup("The session has expired.", "", "/");
                }

                if (resData.includes("nsk:Contact:DuplicateTypeCode")) {
                    alarmPopup("The session has expired.", "", "/");
                }

                if (resData.includes("One or more errors occurred.")) {
                    alarmPopup("The session has expired.", "", "/");
                }
            } else if (response.config.url.includes("/pssapi")) {
                const loggedIn = Boolean(response.headers["x-user-login"])

                if ($("#loginUserName").html() !== undefined && !loggedIn) {
                    alarmPopup("The session has expired.", "", "/");
                    return false;
                }

                if (response.status === 400 || response.status === 500) {
                    alarmPopup("This is an unusual approach.", "", "/");
                }
            }

            if (response.config.url !== "/ticket/selectPointTarget") {
                $(".loadingBar").hide();
            }
            return response;
        },
        function (error) {
            // 오류 응답을 처리
            // ...
            return Promise.reject(error);
        });

    var getParameters = function (paramName) {
        // 리턴값을 위한 변수 선언
        var returnValue;

        // 현재 URL 가져오기
        var url = location.href;

        // get 파라미터 값을 가져올 수 있는 ? 를 기점으로 slice 한 후 split 으로 나눔
        var parameters = (url.slice(url.indexOf('?') + 1, url.length)).split('&');

        // 나누어진 값의 비교를 통해 paramName 으로 요청된 데이터의 값만 return
        for (var i = 0; i < parameters.length; i++) {
            var varName = parameters[i].split('=')[0];
            if (varName.toUpperCase() == paramName.toUpperCase()) {
                returnValue = parameters[i].split('=')[1];
                return decodeURIComponent(returnValue);
            }
        }
    };

    /* [aes128Encode 이벤트 함수 정의] */
    function aes256Encode(data) {
        var secretKey = "airpremiadatakey"; // key 값 32 바이트
        var Iv = secretKey.substring(0, 16); //iv 16 바이트
        var aes256EncodeData = "";

        // [aes 인코딩 수행 실시 : cbc 모드]
        const cipher = CryptoJS.AES.encrypt(data, CryptoJS.enc.Utf8.parse(secretKey), {
            iv: CryptoJS.enc.Utf8.parse(Iv), // [Enter IV (Optional) 지정 방식]
            padding: CryptoJS.pad.Pkcs7,
            mode: CryptoJS.mode.CBC // [cbc 모드 선택]
        });

        // [인코딩 된 데이터 확인 실시]
        aes256EncodeData = cipher.toString();

        return aes256EncodeData;
    };


    /* [aes256Decode 이벤트 함수 정의] */
    function aes256Decode(data) {
        var secretKey = "airpremiadatakey"; // key 값 32 바이트
        var Iv = secretKey.substring(0, 16); //iv 16 바이트
        var aes256DecodeData = "";

        // [aes 디코딩 수행 실시 : cbc 모드]
        const cipher = CryptoJS.AES.decrypt(data, CryptoJS.enc.Utf8.parse(secretKey), {
            iv: CryptoJS.enc.Utf8.parse(Iv), // [Enter IV (Optional) 지정 방식]
            padding: CryptoJS.pad.Pkcs7,
            mode: CryptoJS.mode.CBC // [cbc 모드 선택]
        });

        // [인코딩 된 데이터 확인 실시]
        aes256DecodeData = cipher.toString(CryptoJS.enc.Utf8);

        return aes256DecodeData;
    };

    function textReplace(text) {
        var text;
        text = text.replace(/\&lt;/gi, "<");
        text = text.replace(/\&amp;lt;/gi, "<");
        text = text.replace(/\&gt;/gi, ">");
        text = text.replace(/\&amp;gt;/gi, ">");
        text = text.replace(/\&quot;/gi, '"');
        text = text.replace(/\&amp;quot;/gi, '"');
        text = text.replace(/\&nbsp;/gi, " ");
        text = text.replace(/\&amp;nbsp;/gi, " ");

        return text;
    }
</script>

<!-- 에어프레미아 회원이신가요? 팝업 -->
<div id="loginPopup2" class="bPopWrap pop3 wdCtr w500 popPrmtLogin">
    <div class="popTit">
        <p class="pTit">Are you an Air Premia member?:-)
            <br>
            <span class="popDescription">Log in to enjoy more benefits.</span>
        </p>
        <div class="xBtnWrap">
            <button class="b-close">Close</button>
        </div>
    </div>
    <div class="popScr prM">
        <button onclick="fn_formSubmit('/login')" class="taskButton">Login</button>
    </div>
</div>
</html>


